(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07b08162"],{2226:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"commonright container"},[e("div",{staticClass:"filter"},[e("div",{staticClass:"filter-item"},[e("label",{staticClass:"filter-label"},[t._v("用户")]),e("el-input",{attrs:{type:"text",clearable:"",placeholder:"昵称/账号/ID"},model:{value:t.filters.searchkey,callback:function(a){t.$set(t.filters,"searchkey",a)},expression:"filters.searchkey"}})],1),e("div",{staticClass:"filter-item"},[e("label",{staticClass:"filter-label"},[t._v("状态")]),e("el-select",{attrs:{clearable:""},model:{value:t.filters.status,callback:function(a){t.$set(t.filters,"status",a)},expression:"filters.status"}},t._l(t.statusSelect,(function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.label}})})),1)],1),e("div",{staticClass:"filter-btn"},[e("button",{staticClass:"primarybtn search",on:{click:function(a){return t.getData(1)}}},[t._v("查询")])])]),e("div",{staticClass:"contentpad"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.data.loading,expression:"data.loading"}],attrs:{data:t.data.list,"header-cell-style":{background:t.$protovar.tbhabg}}},[e("el-table-column",{attrs:{label:"ID",prop:"id",align:t.$protovar.align}}),e("el-table-column",{attrs:{label:"账号",prop:"loginname",align:t.$protovar.align}}),e("el-table-column",{attrs:{label:"昵称",prop:"nick",align:t.$protovar.align}}),e("el-table-column",{attrs:{label:"头像",align:t.$protovar.align},scopedSlots:t._u([{key:"default",fn:function(t){return[e("el-image",{staticClass:"imgcol",attrs:{src:t.row.avatar}})]}}])}),e("el-table-column",{attrs:{label:"邮箱",prop:"email",align:t.$protovar.align}}),e("el-table-column",{attrs:{label:"手机号",align:t.$protovar.align},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.phone||"--"))])]}}])}),e("el-table-column",{attrs:{label:"IP",align:t.$protovar.align},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.ip?e("a",{staticClass:"a_ip",attrs:{href:"https://www.baidu.com/s?wd="+a.row.ip+"&from=t-io",target:"_blank"}},[t._v(t._s(a.row.ip)+" ")]):e("span",[t._v("--")])]}}])}),e("el-table-column",{attrs:{label:"注册时间",prop:"createtime",align:t.$protovar.align}}),e("el-table-column",{attrs:{label:"最近登录",prop:"lastlogintime",align:t.$protovar.align}}),e("el-table-column",{attrs:{label:"状态",align:t.$protovar.align},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{class:[1==a.row.status?"tmdisabledfalse":"tmdisabledtrue"]},[t._v(t._s(1==a.row.status?"正常":"已禁用"))])]}}])}),e("el-table-column",{attrs:{label:"操作",align:t.$protovar.align,width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"tmopera",on:{click:function(e){return t.seeInfo(a.row)}}},[t._v("查看")]),e("span",{directives:[{name:"auth",rawName:"v-auth",value:"disable",expression:"'disable'"}],class:["tmopera",1==a.row.status?"stateDisabled":"statesuccess"],on:{click:function(e){return t.operStatus(a.row)}}},[t._v(t._s(1==a.row.status?"禁用":"启用"))]),e("span",{directives:[{name:"auth",rawName:"v-auth",value:"reset",expression:"'reset'"}],staticClass:"tmopera",on:{click:function(e){return t.resetPwd(a.row)}}},[t._v("重置密码")])]}}])})],1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.data.totalRow>0,expression:"data.totalRow>0"}],staticClass:"pagecontainer"},[e("el-pagination",{attrs:{layout:"total,prev, pager, next,sizes,jumper",background:"","page-size":t.data.pageSize,"page-sizes":t.data.pagesizes,total:t.data.totalRow,"current-page":t.data.pageNumber},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1),e("el-dialog",{staticClass:"tmdialog",attrs:{visible:t.dialog3.visible,width:t.$protovar.dwidth,modal:!1},on:{"update:visible":function(a){return t.$set(t.dialog3,"visible",a)}}},[e("div",{staticClass:"title"},[t._v("确认重置当前用户登录密码吗？")]),e("div",{staticClass:"tmdialog-footer pb60"},[e("button",{staticClass:"primarybtn search",on:{click:function(a){return t.hideDialog("dialog3","visible")}}},[t._v("取消")]),e("button",{staticClass:"primarybtn",on:{click:t.sureResetPwd}},[t._v("重置")])])]),e("el-dialog",{staticClass:"tmdialog",attrs:{visible:t.dialog3.visible2,width:t.$protovar.dwidth,modal:!1},on:{"update:visible":function(a){return t.$set(t.dialog3,"visible2",a)}}},[e("div",{staticClass:"title"},[e("p",[t._v("已成功重置为默认密码："+t._s(t.sysparams?t.sysparams["resetpwd"]:""))]),e("p",[t._v("请尽快通知用户进行修改！")])]),e("div",{staticClass:"tmdialog-footer pb60"},[e("button",{staticClass:"primarybtn",on:{click:function(a){return t.hideDialog("dialog3","visible2")}}},[t._v("确定")])])]),e("el-dialog",{staticClass:"tmdialog ",attrs:{visible:t.dialog2.visible,"close-on-click-modal":!1,width:t.$protovar.dtfwidth},on:{"update:visible":function(a){return t.$set(t.dialog2,"visible",a)}}},[e("el-form",{staticClass:"dialogform",attrs:{"label-width":t.$protovar.fmlabwidth,"hide-required-asterisk":!0}},[e("p",{staticClass:"tmheader"},[t._v("账号信息")]),e("div",{staticClass:"tmcol tmcol-half"},[e("el-form-item",{attrs:{label:"账号："}},[e("span",{staticClass:"textlh"},[t._v(t._s(t.dialog2.data.loginname))])])],1),e("div",{staticClass:"tmcol tmcol-half"},[e("el-form-item",{attrs:{label:"邮箱："}},[e("span",{staticClass:"textlh"},[t._v(t._s(t.dialog2.data.email||"--"))])])],1),e("div",{staticClass:"tmcol tmcol-half"},[e("el-form-item",{attrs:{label:"注册时间："}},[e("span",{staticClass:"textlh"},[t._v(t._s(t.dialog2.data.createtime))])])],1),e("div",{staticClass:"tmcol tmcol-half"},[e("el-form-item",{attrs:{label:"手机号："}},[e("span",{staticClass:"textlh"},[t._v(t._s(t.dialog2.data.phone||"--"))])])],1),e("div",{staticClass:"tmcol tmcol-half"},[e("el-form-item",{attrs:{label:"IP："}},[e("span",{staticClass:"textlh"},[t._v(t._s(t.dialog2.data.ip||"--"))])])],1),e("div",{staticClass:"tmcol tmcol-half"},[e("el-form-item",{attrs:{label:"状态："}},[e("span",{staticClass:"textlh"},[t._v(t._s(1==t.dialog2.data.status?"正常":"禁用"))])])],1),e("p",{staticClass:"tmheader"},[t._v("用户资料")]),e("div",{staticClass:"tmcol tmcol-half"},[e("el-form-item",{attrs:{label:"昵称："}},[e("span",{staticClass:"textlh"},[t._v(t._s(t.dialog2.data.nick||"--"))])])],1),e("div",{staticClass:"tmcol tmcol-half"},[e("el-form-item",{attrs:{label:"性别："}},[e("span",{staticClass:"textlh"},[t._v(t._s(1==t.dialog2.data.sex?"男":2==t.dialog2.data.sex?"女":"保密"))])])],1),e("div",{staticClass:"tmcol tmcol-half"},[e("el-form-item",{attrs:{label:"头像："}},[e("span",{staticClass:"textlh"},[e("el-image",{staticClass:"see-imgcol",attrs:{src:t.dialog2.data.avatar}})],1)])],1),e("div",{staticClass:"tmcol tmcol-half"},[e("el-form-item",{attrs:{label:"地区："}},[e("span",{staticClass:"textlh"},[t._v(t._s(t.dialog2.data.province+t.dialog2.data.city))])])],1),e("div",{staticClass:"tmcol tmcol-half"},[e("el-form-item",{attrs:{label:"签名："}},[e("span",{staticClass:"textlh"},[t._v(t._s(t.dialog2.data.sign||"--"))])])],1)])],1)],1)},l=[],i=(e("d81d"),e("5530")),o=e("e862"),r=e("230d"),n={data:function(){return{filters:{searchkey:"",status:""},statusSelect:[{id:1,label:"正常"},{id:2,label:"禁用"}],data:{pageNumber:1,pageSize:10,totalRow:0,loading:!1,list:[],pagesizes:[10,20,30,40]},currdata:null,dialog2:{visible:!1,data:{}},dialog3:{visible:!1,visible2:!1},loading:!1,curroute:""}},mounted:function(){this.curroute=this.$route.path,this.getData()},watch:{$route:function(t,a){if(t.path==this.curroute){if(-1!=this.$protovar.routehasopen&&!t.query.random)return;Object.assign(this.$data,this.$options.data()),this.curroute=this.$route.path,this.getData()}}},methods:{getData:function(t){var a=this;t&&(this.data.pageNumber=t),this.data.loading=!0;var e=this.data,s=e.pageNumber,l=e.pageSize,n=Object(i["a"])(Object(i["a"])({},this.filters),{},{pageNumber:s,pageSize:l});o["k"].userList(n).then((function(t){if(t.ok){var e=t.data;if(e){a.data.totalRow=e.totalRow;var s=e.list;s.map((function(t){t.avatar=Object(r["g"])(t.avatar)})),a.data.list=s||[]}}else Object(o["C"])(t);a.data.loading=!1}))},handleCurrentChange:function(t){this.data.pageNumber=t,this.getData()},handleSizeChange:function(t){this.data.pageNumber=1,this.data.pageSize=t,this.getData()},seeInfo:function(t){this.dialog2.data=t,this.dialog2.visible=!0},hideDialog:function(t,a){this[t][a]=!1},resetPwd:function(t){this.currdata=t,this.dialog3.visible=!0},sureResetPwd:function(){var t=this,a={uid:this.currdata.id};o["k"].resetPwd(a).then((function(a){a.ok?(t.dialog3.visible=!1,t.dialog3.visible2=!0):Object(o["C"])(a)}))},operStatus:function(t){var a=this,e={uid:t.id,status:1==t.status?2:1};o["k"].userDisable(e).then((function(t){t.ok?(Object(o["L"])("修改成功"),a.getData()):Object(o["C"])(t)}))}}},c=n,d=(e("f1dc"),e("2877")),u=Object(d["a"])(c,s,l,!1,null,"36f797a1",null);a["default"]=u.exports},f1dc:function(t,a,e){"use strict";var s=e("f7b8"),l=e.n(s);l.a},f7b8:function(t,a,e){}}]);